  <script type="text/x-template" id="orders-view-template">
    <div class="orders-view">
      <h2>Órdenes</h2>
      
      <!-- Tabs Navigation -->
      <div class="modal-tabs">
        <button class="tab-btn" :class="{ active: activeTab === 'active' }" 
                @click="switchTab('active')">
          Órdenes Activas
        </button>
        <button class="tab-btn" :class="{ active: activeTab === 'history' }" 
                @click="switchTab('history')">
          Historial
        </button>
      </div>

      <!-- Tab Content -->
      <div class="orders-tab-content">
        
        <!-- Active Orders Tab -->
        <div v-if="activeTab === 'active'" class="active-orders-tab">
          <div v-if="loading" class="empty-state">Cargando...</div>
          <div v-else-if="activeOrders.length === 0" class="empty-state">
            No hay órdenes activas
          </div>
          <div v-else class="orders-list">
            <div v-for="order in activeOrders" :key="order.order_id" 
                 class="order-card">
              <div class="order-header">
                <div class="order-info">
                  <strong>{{ getTableName(order.table_number) }}</strong>
                  <span class="order-time">{{ formatTime(order.timestamp) }}</span>
                </div>
                <div class="order-total">S/.{{ order.total.toFixed(2) }}</div>
              </div>
              <div class="order-items">
                <div v-for="item in order.items" :key="item.item_id" 
                     class="order-item-row">
                  <span class="item-qty">{{ item.quantity }}x</span>
                  <span class="item-name">{{ item.product_name }}</span>
                  <span class="item-price">S/.{{ (item.final_price * item.quantity).toFixed(2) }}</span>
                </div>
              </div>
              <div class="order-actions">
                <button class="btn-primary" @click="goToPayment(order)">
                  Cobrar Pedido
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- History Tab -->
        <div v-if="activeTab === 'history'" class="history-tab">
          <div v-if="loading" class="empty-state">Cargando...</div>
          <div v-else-if="paidOrders.length === 0" class="empty-state">
            No hay historial de órdenes
          </div>
          <div v-else class="orders-list">
            <div v-for="order in paidOrders" :key="order.order_id" 
                 class="order-card">
              <div class="order-header">
                <div class="order-info">
                  <strong>Orden #{{ order.order_id.substring(4, 10) }}</strong>
                  <span class="order-time">{{ formatTime(order.timestamp) }}</span>
                </div>
                <div class="order-total">S/.{{ order.total_amount.toFixed(2) }}</div>
              </div>
              <div class="payment-details">
                <div class="payment-label">Pagado con:</div>
                <div v-for="payment in order.payments" :key="payment.payment_id" 
                     class="payment-row">
                  <span class="payment-method">{{ payment.payment_method }}</span>
                  <span class="payment-amount">S/.{{ payment.amount.toFixed(2) }}</span>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </script>
